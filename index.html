<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Overtime Management 2</title>
</head>
<body>
  <h1>Overtime Management</h1>

  <!-- Form for Creating a Record -->
  <h2>Create Overtime Record</h2>
  <form id="overtimeForm">
    <label for="nama">Nama:</label>
    <input type="text" id="nama" name="nama" required><br><br>

    <label for="unit">Unit:</label>
    <input type="text" id="unit" name="unit" required><br><br>

    <label for="description">Description:</label>
    <textarea id="description" name="description"></textarea><br><br>

    <label for="tanggalLembur">Tanggal Lembur:</label>
    <input type="date" id="tanggalLembur" name="tanggalLembur" required><br><br>

    <label for="dayOfWeek">Day of Week:</label>
    <input type="text" id="dayOfWeek" name="dayOfWeek"><br><br>

    <label for="isLibur">Is Libur:</label>
    <input type="text" id="isLibur" name="isLibur"><br><br>

    <label for="jamMulai">Jam Mulai:</label>
    <input type="time" id="jamMulai" name="jamMulai"><br><br>

    <label for="jamSelesai">Jam Selesai:</label>
    <input type="time" id="jamSelesai" name="jamSelesai"><br><br>

    <label for="durasi">Durasi:</label>
    <input type="text" id="durasi" name="durasi"><br><br>

    <label for="overtimeRate">Overtime Rate:</label>
    <input type="text" id="overtimeRate" name="overtimeRate"><br><br>

    <label for="upahLembur">Upah Lembur:</label>
    <input type="text" id="upahLembur" name="upahLembur"><br><br>

    <label for="totalBiaya">Total Biaya:</label>
    <input type="text" id="totalBiaya" name="totalBiaya"><br><br>

    <button type="button" onclick="submitOvertime()">Submit</button>
  </form>

  <hr>

  <!-- Section for Displaying Records -->
  <h2>Overtime Records</h2>
  <button onclick="fetchOvertimeRecords()">Fetch Records</button>
  <div id="records"></div>

  <script>
    
    const API_URL = 'https://script.google.com/macros/s/AKfycbyFrl3I-IPCH3NNZGTkxCmKcB7HlxV0MPO8ejVN2IbItALf-8zWYKiutn0tuMGBelcK/exec'; // Replace with your script ID

    // Function to submit a new overtime record
    function submitOvertime() {
      const formData = {
        nama: document.getElementById('nama').value,
        unit: document.getElementById('unit').value,
        description: document.getElementById('description').value,
        tanggalLembur: document.getElementById('tanggalLembur').value,
        dayOfWeek: document.getElementById('dayOfWeek').value,
        isLibur: document.getElementById('isLibur').value,
        jamMulai: document.getElementById('jamMulai').value,
        jamSelesai: document.getElementById('jamSelesai').value,
        durasi: document.getElementById('durasi').value,
        overtimeRate: document.getElementById('overtimeRate').value,
        upahLembur: document.getElementById('upahLembur').value,
        totalBiaya: document.getElementById('totalBiaya').value
      };

      fetch(API_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(formData)
      })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            alert('Record submitted successfully!');
          } else {
            alert('Error: ' + data.error);
          }
        })
        .catch(error => console.error('Error:', error));
    }

    // Function to fetch all overtime records
    function fetchOvertimeRecords() {
      fetch(API_URL)
        .then(response => response.json())
        .then(data => {
          const recordsDiv = document.getElementById('records');
          recordsDiv.innerHTML = JSON.stringify(data, null, 2);
        })
        .catch(error => console.error('Error:', error));
    }
  </script>
</body>
</html>
